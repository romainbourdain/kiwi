---
title: Introduction à l'utilisation de Zustand dans React
description: Zustand est une librairie légère pour la gestion d'état dans les applications React. Découvrez comment l'utiliser pour gérer l'état global ou local de votre application.
---

## Pourquoi utiliser Zustand ?

- **Simplicité** : La configuration est simple, avec moins de boilerplate que Redux.
- **Performances** : Zustand utilise un système d’abonnement basé sur des hooks, ce qui améliore les performances en ne forçant pas un re-render global.
- **Flexible** : Peut être utilisé à la fois pour de petits états locaux ou des états plus globaux.

## Installation

Pour commencer, vous devez installer la librairie avec npm ou yarn :

```bash
npm install zustand
```

Ou avec yarn :

```bash
yarn add zustand
```

## 1. Créer un Store avec Zustand

Zustand permet de créer un store à l'aide de la fonction `create`. Voici un exemple basique de création d’un store :

```javascript
import create from "zustand";

const useStore = create((set) => ({
  count: 0,
  increment: () => set((state) => ({ count: state.count + 1 })),
  decrement: () => set((state) => ({ count: state.count - 1 })),
}));
```

### Explication :

- `useStore` : C'est notre hook personnalisé qui accède au store.
- `set` : Cette fonction met à jour l'état du store. Ici, on l’utilise dans `increment` et `decrement` pour modifier la valeur de `count`.

## 2. Utiliser le Store dans un Composant

Pour utiliser le store dans un composant React, il suffit d’appeler `useStore()` dans le corps du composant :

```javascript
function Counter() {
  const { count, increment, decrement } = useStore();

  return (
    <div>
      <h1>{count}</h1>
      <button onClick={increment}>Incrémenter</button>
      <button onClick={decrement}>Décrémenter</button>
    </div>
  );
}

export default Counter;
```

### Explication :

- `useStore()` permet de récupérer des valeurs et des fonctions du store, ici `count`, `increment` et `decrement`.
- Le composant `Counter` affiche la valeur actuelle de `count` et permet à l’utilisateur d'incrémenter ou décrémenter cette valeur.

## 3. Gestion de l’état avec des Sélecteurs

Zustand permet de sélectionner uniquement les parties de l'état qui vous intéressent, ce qui améliore les performances en réduisant les re-renders inutiles.

### Exemple avec un sélecteur :

```javascript
function ShowCount() {
  const count = useStore((state) => state.count);
  return <h1>{count}</h1>;
}
```

### Explication :

- Au lieu de récupérer tout l'état du store, vous pouvez sélectionner uniquement la valeur `count`, ce qui réduit les re-renders.

## 4. Gestion de Middleware avec Zustand

Zustand supporte les middlewares comme la persistance de l'état ou la journalisation des actions. Voici un exemple avec le middleware de persistance.

### Exemple avec `persist` :

```javascript
import create from "zustand";
import { persist } from "zustand/middleware";

const useStore = create(
  persist(
    (set) => ({
      count: 0,
      increment: () => set((state) => ({ count: state.count + 1 })),
      decrement: () => set((state) => ({ count: state.count - 1 })),
    }),
    {
      name: "counter-storage", // nom sous lequel les données sont stockées
    }
  )
);
```

### Explication :

- Le middleware `persist` permet de stocker l'état dans le localStorage du navigateur.
- Dans cet exemple, l'état de `count` sera automatiquement persistant même après un rafraîchissement de la page.

## 5. Utilisation Avancée avec Immer

Zustand s’intègre également bien avec Immer, un autre outil qui simplifie les mises à jour immuables dans les structures d’état complexes.

### Exemple avec Immer :

```javascript
import create from "zustand";
import produce from "immer";

const useStore = create((set) => ({
  tasks: [],
  addTask: (task) =>
    set(
      produce((state) => {
        state.tasks.push(task);
      })
    ),
}));
```

### Explication :

- Immer permet de manipuler des structures d'état immuables de manière plus concise. Ici, il est utilisé pour ajouter une tâche à la liste `tasks`.

## Conclusion

Zustand est une solution de gestion d'état qui offre flexibilité, simplicité et performance. Sa syntaxe minimaliste et son intégration facile avec d'autres bibliothèques en font un excellent choix pour de nombreuses applications React, que ce soit pour un petit état local ou pour un état global complexe.

---

Pour en savoir plus, consultez la [documentation officielle de Zustand](https://github.com/pmndrs/zustand).
